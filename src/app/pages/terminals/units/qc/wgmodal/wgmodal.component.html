<div class="modal-header d-flex justify-content-between">
  <h4>外购、外协生产操作录入</h4>
  <button class="close" aria-label="Close" (click)="dismissModal()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <form #f="ngForm">
    <div class="form-group" *ngFor="let op of ops">
      <div class="row">
        <div class="form-group row col-md-5">
          <label for="{{op.text}}psub" class="col-sm-4 col-form-label text-center">{{op.oper}}:</label>
          <div class="col-sm-8" *ngIf="persons">
            <select class="form-control" [(ngModel)]="model[op.text].psub.person" id="{{op.text}}psub" name="{{op.text}}psub" required >
              <option>--请选择--</option>
              <option *ngFor="let person of persons[op.text]" [ngValue]="person">{{person.oid}}[{{person.name}}]</option>
            </select>
          </div>
        </div>
        <div class="form-group row col-md-7">
          <label for="{{op.text}}date" class="col-sm-4 col-form-label text-center">{{op.name}}时间:</label>
          <div class="col-sm-8">
            <input type="datetime-local" class="form-control" id="{{op.text}}date" [ngModel]="model[op.text].date | date:'yyyy-MM-ddTHH:mm'" (ngModelChange)="model[op.text].date = $event" name="{{op.text}}date" required>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="modal-footer">
  <button class="btn btn-md btn-primary" (click)="dismissModal()">返回</button>
  <button class="btn btn-md btn-primary" [disabled]="!f.valid" (click)="closeModal()">确认</button>
</div>
